@using Microsoft.AspNetCore.Http;
@using System.Security.Claims;
@using MainApp.Models;

@functions{
    public string GetUserRole()
    {
        var role = Context.User.FindFirst(ClaimsIdentity.DefaultRoleClaimType); 

        if (role != null)
        {
            return role.Value;
        }

        return null;
    }
}


<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    <link rel="shortcut icon" href=~/lib/favicon.ico/>
    <link rel="stylesheet" href=~/styles/layout/mainlayout.css/> 
</head>
<body>
    <header>      
        <div class="catalog-head">
            <nav class="catalog-head__nav">
                <ul class="catalog-head__menu">
                    @if (@GetUserRole() == "admin" || @GetUserRole() == "editor")
                    {
                        <li class="catalog-head__item"><a asp-controller="#" asp-action="#">Управление</a></li>
                        <li class="catalog-head__item"><a asp-controller="#" asp-action="#">Учебник</a></li>
                    }
                    else
                    {
                        <li class="catalog-head__item"><a asp-controller="Page" asp-action="Study">Учащимся</a></li>
                        <li class="catalog-head__item"><a asp-controller="#" asp-action="#">Вакансии</a></li>
                        <li class="catalog-head__item"><a asp-controller="#" asp-action="#">О Нас</a></li>
                    }
                </ul>                
            </nav>

            <div class="catalog-head__face">
                <div class="catalog-head__brand">
                    <a asp-controller="Page" asp-action="Welcome">
                        <img src="~/img/favicon.png" class="catalog-head-brand__logo">
                        <h2 class="catalog-head-brand__name">Tutorial Book</h2>
                    </a>
                </div>
            </div>
            
            <div class="catalog-head__account">
                @if (@GetUserRole() == null)
                {
                    <a asp-controller="Entry" asp-action="UserLogin">Войти</a>
                    <a asp-controller="Entry" asp-action="UserRegistration">Регистрация</a>
                }
                else
                {
                    <a asp-controller="Page" asp-action="ViewProfile">Аккаунт</a>
                    <a asp-controller="Entry" asp-action="Logout">Выйти</a>
                } 
            </div>
        </div>
    </header>

    <main>
        @RenderBody()
    </main>

    <footer>
        <div class="bottom">
            <article class="bottom-main">
                <div class="bottom__we">
                    <a asp-controller="Page" asp-action="Welcome">
                        <img src="~/img/favicon.png" class="bottom-we__logo">
                    </a>
                    <span> Copyright © 2022 LeoIsak, Inc. </span>
                </div>
                
                <ul class="bottom__info">
                    <li class="bottom-info__item"><a asp-controller="#" asp-action="#">Правообладателям</a></li>
                    <li class="bottom-info__item"><a asp-controller="#" asp-action="#">Конфидециальность</a></li>
                    <li class="bottom-info__item"><a asp-controller="#" asp-action="#">Безопасность</a></li>
                    <li class="bottom-info__item"><a asp-controller="#" asp-action="#">Связь с нами</a></li>
                </ul>
            </div>
        </div>
    </footer>
</body>
</html>
